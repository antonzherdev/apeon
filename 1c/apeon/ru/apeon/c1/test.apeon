package ru.apeon.c1

import ru.apeon._

datasource c1

entity Material<c1> {
    table Catalog.Номенклатура
    discriminator ЭтоГруппа = 0

    column id(Ref) char(36) primary key
    column name(Наименование) varchar(254)
    column number(Артикул) varchar(254)
}

entity MatMoveIn<c1> {
    table Document.ПоступлениеТоваровУслуг

    column id(Ref) char(36) primary key
    column number(Номер) varchar(254)
    column date(Дата) date

    many materials {
        table Document.ПоступлениеТоваровУслуг.Товары
        one parent(Ref) MatMoveIn primary key

        column number(НомерСтроки) integer primary key
        column quantity(Количество) decimal(15, 3)
        column amount(Сумма) decimal(15, 2)
    }
}

query Test {
`from MatMoveIn`.select

//`from MatMoveIn`.select

/*`from Material<c1>`.select.foreach {material =>
    material sync as s to comtec.Material<comtec.comtec> as d where `s.number = d.number and s.name = d.name`
	}*/
}